#!/usr/bin/python
from socket import *
import sys
serversocket = socket(AF_INET, SOCK_STREAM)
serverport = int(sys.argv[1])
serversocket.bind(('', serverport))
serversocket.listen(1)
print("The server is ready to receive")
while True:
	connectionsocket, addr = serversocket.accept()
	print("New request received from");print(addr);
	print("Connection socket is");print(connectionsocket);
	sentence = connectionsocket.recv(1024).decode()
	words = sentence.split()
	print(words[0], words[1])
	if(words[0] == "GET"):
		string = "HTTP/1.1 200 OK\n"
		string += "Date: Wed, 30 Sep 2020 09: 3%: 34 GMT\n"
		string += "Server: Riddhi's Server/0.0.1 (Ubuntu)\n"
		string += "Content-Length: 303\n"
		string += "Connection: close\n"
		string += "Content-Type: text/html; charset=iso-8859-1\n\n"
		f = open("index.html")
		text = f.read()
		output = string + text
		connectionsocket.send(output.encode())
	connectionsocket.close()